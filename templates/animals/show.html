{% extends 'animals/base.html' %}

{% block page_css %}
<link rel="stylesheet" href=" {{ url_for('static', filename='css/animals/show.css') }} ">
{% endblock page_css %}
{% block content %}
<article class="show-single">
  <header>
    <h2> {{animal.name }}</h2>
  </header>
  <main>
    <p>Species: {{ animal.species }}</p>
    <p>Breed: {{ animal.breed }}</p>
    <p>DOB: {{ animal.dob }}</p>
    <p>{{ animal.date_registered }}</p>
    {% if animal.checked_in %}
    <span class="checked-in">✓</span>
    {% else %}
    <span class="checked-out">✗</span>
    {% endif %}

  </main>
  <aside>
    <p>Owned by <a href="/owners/{{ animal.owner.id }}">{{ animal.owner.first_name }}
        {{ animal.owner.last_name }}</a>
    </p>
    <p>Assigned to <a href="/vets/{{ animal.vet.id }}">{{ animal.vet.first_name }} {{ animal.vet.last_name }}</a>
    </p>
  </aside>
  <footer>
    <a href="/animals/{{animal.id}}/edit">Edit details</a>
    <a href="/animals/{{animal.id}}/delete">Remove from system</a>
  </footer>
  <section id="records">
    {% if records|length > 0 %}
    <article>
      <header>
        <h3>{{animal.name}}'s medical records</h3>
        <a href="/records/new/{{ animal.id }}">Add new entry</a>
      </header>
      <main>
        {% for record in records|sort(reverse=false, attribute="date") %}
        <section>
          <h4>{{ record.date }}</h4>
          <p>{{ record.entry|truncate(100, True, '...', 0) }}</p>
          <a href="/records/{{record.id}}">View record</a>
        </section>
        {% endfor %}
      </main>
    </article>

    {% else %}

    <article>
      <header>
        <h3>No medical records for {{animal.name}} right now</h3>
        <a href="/records/new/{{ animal.id }}">Add new entry</a>
      </header>
    </article>
    {% endif %}

  </section>
</article>
{% endblock content %}